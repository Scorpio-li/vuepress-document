{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{210:function(t,s,n){\"use strict\";n.r(s);var e=n(0),a=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n(\"div\",{staticClass:\"content\"},[n(\"h1\",{attrs:{id:\"浏览器兼容\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#浏览器兼容\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" 浏览器兼容\")]),t._v(\" \"),n(\"h2\",{attrs:{id:\"_1-解决-touchstart-事件与-click-事件的冲突\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-解决-touchstart-事件与-click-事件的冲突\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" 1. 解决 touchstart 事件与 click 事件的冲突\")]),t._v(\" \"),n(\"ul\",[n(\"li\",[n(\"p\",[t._v(\"移动设备上的浏览器将会在 click 事件触发时延迟 300ms ，以确保这是一个“单击”事件而非“双击”事件。\")])]),t._v(\" \"),n(\"li\",[n(\"p\",[t._v(\"而对于 touchstart 事件而言，则会在用户手指触碰屏幕的一瞬间触发所绑定的事件。所以，使用 touchstart 替换 click 事件的意义在于，帮助用户在每次点击时节省 300ms 的时间。在页面频繁需要点击，或者点击发生在动画中，对动画流畅度有较高要求的情境下，使用这种技术是非常必要的。\")])]),t._v(\" \"),n(\"li\",[n(\"p\",[t._v(\"在 PC端站点适配移动端时 我们不能简单的进行 touchstart 和 click 事件的替换，因为PC并不能识别 touchstart 事件。\")])])]),t._v(\" \"),n(\"h3\",{attrs:{id:\"原因：\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#原因：\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" 原因：\")]),t._v(\" \"),n(\"p\",[t._v(\"由于移动设备能够同时识别 touchstart 和 click 事件，因此当用户点击目标元素时，绑定在目标元素上的 touchstart 事件与 click 事件（约300ms后）会依次被触发，也就是说，我们所绑定的回调函数会被执行两次！。\")]),t._v(\" \"),n(\"h3\",{attrs:{id:\"解决方案：\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#解决方案：\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" 解决方案：\")]),t._v(\" \"),n(\"ol\",[n(\"li\",[t._v(\"使用 preventDefault：第一种解决方案是使用事件对象中的 preventDefault 方法\")])]),t._v(\" \"),n(\"div\",{staticClass:\"language- line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v('const Button = document.getElementById(\"targetButton\")\\n\\nButton.addEventListener(\"touchstart\", e => {\\n    e.preventDefault()\\n    console.log(\"touchstart event!\")\\n})\\n\\nButton.addEventListener(\"click\", e => {\\n    e.preventDefault()\\n    console.log(\"click event!\")\\n})\\n')])]),t._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"11\")]),n(\"br\")])]),n(\"ol\",{attrs:{start:\"2\"}},[n(\"li\",[t._v(\"基于功能检测绑定事件\")])]),t._v(\" \"),n(\"div\",{staticClass:\"language- line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[n(\"code\",[t._v(\"const Button = document.getElementById(\\\"targetButton\\\")\\n\\nconst clickEvent = (function() {\\n  if ('ontouchstart' in document.documentElement === true)\\n    return 'touchstart';\\n  else\\n    return 'click';\\n})();\\n\\nButton.addEventListener(clickEvent, e => {\\n  console.log(\\\"things happened!\\\")\\n})\\n\")])]),t._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[t._v(\"12\")]),n(\"br\")])])])}],!1,null,null,null);s.default=a.exports}}]);","extractedComments":[]}